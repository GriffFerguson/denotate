"use strict";
var words, answer, gameElems = {
    definitionBox: document.getElementById('definition-box'),
    pronounce: document.getElementById('pronounce'),
    partOfSpeech: document.getElementById('speech-part'),
    definition: document.getElementById('definition'),
    answer: document.getElementById('answerInput'),
    submit: document.getElementById('submit'),
    definitions: document.getElementById('definitions'),
};
getWords();
async function getWords() {
    words = await fetch('words.json').then(response => { return response.json(); });
    generateLevel();
}
var rate = 0;
function generateLevel() {
    var rand = Math.floor(Math.random() * words.words.length);
    gameElems.answer.innerHTML = '';
    gameElems.definitions.innerHTML = '';
    fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${words.words[rand]}`)
        .then(response => { return response.json(); })
        .then(json => {
        console.log(json);
        answer = words.words[rand];
        gameElems.pronounce.innerText = json[0].phonetic;
        for (var def of json[0].meanings) {
            console.log(def);
            var meaning = document.createElement('div');
            meaning.classList.add('meaning');
            meaning.innerHTML = `<strong>Definition: (${def.partOfSpeech})</strong>&nbsp;${def.definitions[0].definition}`;
            gameElems.definitions.appendChild(meaning);
        }
        createInput();
        startTimer();
    })
        .catch(err => {
        rate += 1;
        console.log(err, rate);
        if (rate < 3) {
            generateLevel();
        }
    });
}
var allowedLetters = [
    'a', 'b', 'c', 'd', 'e', 'f',
    'g', 'h', 'i', 'j', 'k', 'l',
    'm', 'n', 'o', 'p', 'q', 'r',
    's', 't', 'u', 'v', 'w', 'x',
    'y', 'z'
];
function createInput() {
    console.log('input');
    var answerLetters = answer.split('');
    var i = 0;
    for (var letter in answerLetters) {
        var input = document.createElement('input');
        input.setAttribute('type', 'text');
        input.setAttribute('id', `input-${i.toString()}`);
        input.setAttribute('aria-label', `input letter ${i + 1} of your answer`);
        input.classList.add('letter');
        input.addEventListener('keydown', (event) => {
            event.preventDefault();
            var e = event;
            var id = parseInt(e.target.id.split('-')[1]);
            var key = e.key;
            var elem = document.getElementById(`input-${id}`);
            if (['Backspace', 'Delete'].includes(key)) {
                elem.setAttribute('value', '');
                document.getElementById(`input-${id - 1}`).focus();
            }
            else if (allowedLetters.includes(key)) {
                elem.setAttribute('value', key);
                if (id == answerLetters.length - 1) {
                    gameElems.submit.focus();
                }
                else {
                    document.getElementById(`input-${id + 1}`).focus();
                }
            }
        });
        gameElems.answer.appendChild(input);
        i += 1;
    }
    document.getElementById('input-0').focus();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGV2ZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9iaW4vbGV2ZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUksS0FBVSxFQUNWLE1BQWMsRUFDZCxTQUFTLEdBQWM7SUFDbkIsYUFBYSxFQUFFLFFBQVEsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQUU7SUFDekQsU0FBUyxFQUFFLFFBQVEsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFFO0lBQ2hELFlBQVksRUFBRSxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBRTtJQUNyRCxVQUFVLEVBQUUsUUFBUSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUU7SUFDbEQsTUFBTSxFQUFFLFFBQVEsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFFO0lBQy9DLE1BQU0sRUFBRSxRQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBRTtJQUMxQyxXQUFXLEVBQUUsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUU7Q0FDdkQsQ0FBQztBQUVOLFFBQVEsRUFBRSxDQUFDO0FBRVgsS0FBSyxVQUFVLFFBQVE7SUFDbkIsS0FBSyxHQUFHLE1BQU0sS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxHQUFFLE9BQU8sUUFBUSxDQUFDLElBQUksRUFBRSxDQUFBLENBQUEsQ0FBQyxDQUFDLENBQUM7SUFDN0UsYUFBYSxFQUFFLENBQUM7QUFDcEIsQ0FBQztBQUNELElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztBQUViLFNBQVMsYUFBYTtJQUNsQixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFELFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQTtJQUMvQixTQUFTLENBQUMsV0FBVyxDQUFDLFNBQVMsR0FB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